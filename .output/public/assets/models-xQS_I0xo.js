import{Ot as e,_n as t,bt as n,lt as r}from"./main-CUcn2n7F.js";var i=r(`archive`,[[`rect`,{width:`20`,height:`5`,x:`2`,y:`3`,rx:`1`,key:`1wp1u1`}],[`path`,{d:`M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8`,key:`1s80jp`}],[`path`,{d:`M10 12h4`,key:`a56b0p`}]]),a=r(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),o=r(`loader-circle`,[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]]),s=r(`lock`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]]),c=r(`plus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`M12 5v14`,key:`s699le`}]]);const l=t([]),u=t(!1),d=async()=>{if(!u.get()&&!(l.get().length>0)){u.set(!0);try{let e=await fetch(`https://openrouter.ai/api/v1/models`);if(!e.ok)throw Error(`Failed to fetch models`);let t=await e.json();if(t.data&&Array.isArray(t.data)){let e=t.data.map(e=>{let t=e;return{id:t.id,name:t.name,description:t.description,pricing:t.pricing}});l.set(e)}}catch(e){console.error(`Error fetching OpenRouter models:`,e)}finally{u.set(!1)}}},f=t([]),p=t(!1),m=async()=>{if(p.get())return;let e=await n();if(e&&!(f.get().length>0)){p.set(!0);try{let t=await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${e}`);if(!t.ok)throw Error(`Failed to fetch Google models`);let n=await t.json();if(n.models&&Array.isArray(n.models)){let e=n.models.filter(e=>e.supportedGenerationMethods.includes(`generateContent`)).map(e=>({id:e.name.replace(`models/`,``),name:e.displayName||e.name.replace(`models/`,``),description:e.description,supportedGenerationMethods:e.supportedGenerationMethods}));f.set(e)}}catch(e){console.error(`Error fetching Google models:`,e)}finally{p.set(!1)}}};async function h(e){let t=e.endsWith(`/api`)?`${e}/tags`:`${e}/api/tags`;try{return(await fetch(t,{method:`GET`})).ok}catch{return!1}}async function g(e){let t=e.endsWith(`/api`)?`${e}/tags`:`${e}/api/tags`,n=await fetch(t,{method:`GET`});if(!n.ok)throw Error(`Failed to fetch models: ${n.statusText}`);return(await n.json()).models}async function _(e,t,n){let r=e.endsWith(`/api`)?`${e}/pull`:`${e}/api/pull`,i=await fetch(r,{method:`POST`,body:JSON.stringify({name:t})});if(!i.ok){let e=await i.text();throw Error(`Failed to pull model: ${e}`)}if(!i.body)throw Error(`Response body is null`);let a=i.body.getReader(),o=new TextDecoder,s=``;for(;;){let{done:e,value:t}=await a.read();if(e)break;s+=o.decode(t,{stream:!0});let r=s.split(`
`);s=r.pop()||``;for(let e of r)if(e.trim())try{let t=JSON.parse(e);if(n(t),t.error)throw Error(t.error)}catch{}}if(s.trim())try{let e=JSON.parse(s);if(n(e),e.error)throw Error(e.error)}catch{}}const v=t([]),y=t(!1),b=t(`idle`),x=async()=>{let t=e.get();if(t){y.set(!0),b.set(`checking`);try{if(await h(t)){b.set(`available`);let e=await g(t);v.set(e)}else b.set(`unavailable`),v.set([])}catch(e){console.warn(`Failed to fetch Ollama models:`,e),b.set(`unavailable`),v.set([])}finally{y.set(!1)}}};export{_ as a,p as c,l as d,c as f,i as g,a as h,b as i,d as l,o as m,y as n,m as o,s as p,v as r,f as s,x as t,u};