import{a as e,c as t,d as n,f as r,g as i,h as a,i as o,l as s,m as c,n as l,o as u,p as ee,r as d,s as f,t as p,u as m}from"./models-xQS_I0xo.js";import{n as h,r as g,t as _}from"./skeleton-DaA8thGq.js";import{_ as v,a as y,b,h as te,i as x,n as ne,r as S,s as re,t as C,v as ie,x as ae,y as w}from"./select-CR1IElhE.js";import{At as T,Bt as E,Cn as D,Ct as O,Dt as oe,E as k,Et as A,F as j,Ft as M,Gt as se,Ht as N,It as P,Jt as F,Kt as I,Lt as L,Mt as R,Nt as z,On as B,Ot as ce,Pt as le,Rt as V,St as H,Tn as U,Ut as ue,Vt as de,Wt as fe,Yt as pe,_ as me,_t as he,b as ge,bt as _e,dn as ve,fn as ye,ft as be,g as xe,gn as W,gt as Se,h as Ce,hn as we,ht as Te,it as G,jt as Ee,kt as De,lt as K,mn as Oe,mt as ke,ot as Ae,pn as q,pt as je,qt as Me,ut as J,vn as Ne,vt as Pe,wt as Fe,x as Ie,xt as Le,yt as Y,zt as Re}from"./main-CUcn2n7F.js";var ze=K(`download`,[[`path`,{d:`M12 15V3`,key:`m9g1x1`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`path`,{d:`m7 10 5 5 5-5`,key:`brsn70`}]]),Be=K(`eye-off`,[[`path`,{d:`M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49`,key:`ct8e1f`}],[`path`,{d:`M14.084 14.158a3 3 0 0 1-4.242-4.242`,key:`151rxh`}],[`path`,{d:`M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143`,key:`13bj9a`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}]]),Ve=K(`eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),He=K(`globe`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20`,key:`13o1zl`}],[`path`,{d:`M2 12h20`,key:`9i4pu4`}]]),Ue=K(`key`,[[`path`,{d:`m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4`,key:`g0fldk`}],[`path`,{d:`m21 2-9.6 9.6`,key:`1j0ho8`}],[`circle`,{cx:`7.5`,cy:`15.5`,r:`5.5`,key:`yqb3hr`}]]),X=K(`minus`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}]]),We=K(`monitor`,[[`rect`,{width:`20`,height:`14`,x:`2`,y:`3`,rx:`2`,key:`48i651`}],[`line`,{x1:`8`,x2:`16`,y1:`21`,y2:`21`,key:`1svkeh`}],[`line`,{x1:`12`,x2:`12`,y1:`17`,y2:`21`,key:`vw1qmm`}]]),Ge=K(`moon`,[[`path`,{d:`M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401`,key:`kfwtm`}]]),Ke=K(`sun`,[[`circle`,{cx:`12`,cy:`12`,r:`4`,key:`4exip2`}],[`path`,{d:`M12 2v2`,key:`tus03m`}],[`path`,{d:`M12 20v2`,key:`1lh1kg`}],[`path`,{d:`m4.93 4.93 1.41 1.41`,key:`149t6j`}],[`path`,{d:`m17.66 17.66 1.41 1.41`,key:`ptbguv`}],[`path`,{d:`M2 12h2`,key:`1t8f8n`}],[`path`,{d:`M20 12h2`,key:`1q8mjw`}],[`path`,{d:`m6.34 17.66-1.41 1.41`,key:`1m8zz5`}],[`path`,{d:`m19.07 4.93-1.41 1.41`,key:`1shlcs`}]]),qe=K(`thermometer`,[[`path`,{d:`M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z`,key:`17jzev`}]]),Je=K(`upload`,[[`path`,{d:`M12 3v12`,key:`1x0j5s`}],[`path`,{d:`m17 8-5-5-5 5`,key:`7q97r8`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}]]),Ye=Ne(),Z=B(U(),1),Q=B(D(),1);const Xe=e=>{let t=(0,Ye.c)(56),{id:n,value:i,onChange:a,min:o,max:s,step:c,disabled:l,className:u,allowManualInput:ee,"aria-label":d}=e,f=o===void 0?0:o,p=s===void 0?999:s,m=c===void 0?1:c,h=l===void 0?!1:l,g=ee===void 0?!0:ee,[_,v]=(0,Z.useState)(String(i)),y,b;t[0]===i?(y=t[1],b=t[2]):(y=()=>{v(String(i))},b=[i],t[0]=i,t[1]=y,t[2]=b),(0,Z.useEffect)(y,b);let te;t[3]!==p||t[4]!==f?(te=e=>Math.min(p,Math.max(f,e)),t[3]=p,t[4]=f,t[5]=te):te=t[5];let x=te,ne;t[6]!==x||t[7]!==a||t[8]!==m||t[9]!==i?(ne=()=>{a(x(i+m))},t[6]=x,t[7]=a,t[8]=m,t[9]=i,t[10]=ne):ne=t[10];let S=ne,re;t[11]!==x||t[12]!==a||t[13]!==m||t[14]!==i?(re=()=>{a(x(i-m))},t[11]=x,t[12]=a,t[13]=m,t[14]=i,t[15]=re):re=t[15];let C=re,ie;t[16]===Symbol.for(`react.memo_cache_sentinel`)?(ie=e=>{let t=e.target.value;(t===``||/^\d*$/.test(t))&&v(t)},t[16]=ie):ie=t[16];let ae=ie,w;t[17]!==x||t[18]!==_||t[19]!==a||t[20]!==i?(w=()=>{let e=parseInt(_,10);if(isNaN(e))v(String(i));else{let t=x(e);a(t),v(String(t))}},t[17]=x,t[18]=_,t[19]=a,t[20]=i,t[21]=w):w=t[21];let T=w,E;t[22]!==C||t[23]!==S||t[24]!==T?(E=e=>{e.key===`Enter`?T():e.key===`ArrowUp`?(e.preventDefault(),S()):e.key===`ArrowDown`&&(e.preventDefault(),C())},t[22]=C,t[23]=S,t[24]=T,t[25]=E):E=t[25];let D=E,O;t[26]===u?O=t[27]:(O=J(`inline-flex items-center rounded-lg border border-input bg-background`,`focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2 focus-within:ring-offset-background`,u),t[26]=u,t[27]=O);let oe=`${n}-decrement`,k=h||i<=f,A,j;t[28]===Symbol.for(`react.memo_cache_sentinel`)?(A=J(`flex h-9 w-9 shrink-0 items-center justify-center rounded-l-md transition-colors text-foreground`,`hover:bg-muted disabled:pointer-events-none disabled:opacity-50`,`focus:outline-none`),j=(0,Q.jsx)(X,{className:`h-4 w-4`}),t[28]=A,t[29]=j):(A=t[28],j=t[29]);let M;t[30]!==C||t[31]!==oe||t[32]!==k?(M=(0,Q.jsx)(`button`,{id:oe,type:`button`,onClick:C,disabled:k,"aria-label":`Decrease value`,className:A,children:j}),t[30]=C,t[31]=oe,t[32]=k,t[33]=M):M=t[33];let se;t[34]===Symbol.for(`react.memo_cache_sentinel`)?(se=(0,Q.jsx)(`div`,{className:`h-6 w-px bg-border`}),t[34]=se):se=t[34];let N;t[35]!==g||t[36]!==d||t[37]!==h||t[38]!==T||t[39]!==D||t[40]!==n||t[41]!==_||t[42]!==i?(N=g?(0,Q.jsx)(`input`,{id:`${n}-input`,type:`text`,inputMode:`numeric`,value:_,onChange:ae,onBlur:T,onKeyDown:D,disabled:h,"aria-label":d||`Value`,className:J(`h-9 w-12 bg-transparent text-center text-sm font-medium text-foreground`,`focus:outline-none disabled:pointer-events-none disabled:opacity-50`,`[appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none`)}):(0,Q.jsx)(`div`,{className:`flex h-9 w-12 items-center justify-center text-sm font-medium text-foreground`,children:i}),t[35]=g,t[36]=d,t[37]=h,t[38]=T,t[39]=D,t[40]=n,t[41]=_,t[42]=i,t[43]=N):N=t[43];let P;t[44]===Symbol.for(`react.memo_cache_sentinel`)?(P=(0,Q.jsx)(`div`,{className:`h-6 w-px bg-border`}),t[44]=P):P=t[44];let F=`${n}-increment`,I=h||i>=p,L,R;t[45]===Symbol.for(`react.memo_cache_sentinel`)?(L=J(`flex h-9 w-9 shrink-0 items-center justify-center rounded-r-md transition-colors text-foreground`,`hover:bg-muted disabled:pointer-events-none disabled:opacity-50`,`focus:outline-none`),R=(0,Q.jsx)(r,{className:`h-4 w-4`}),t[45]=L,t[46]=R):(L=t[45],R=t[46]);let z;t[47]!==S||t[48]!==F||t[49]!==I?(z=(0,Q.jsx)(`button`,{id:F,type:`button`,onClick:S,disabled:I,"aria-label":`Increase value`,className:L,children:R}),t[47]=S,t[48]=F,t[49]=I,t[50]=z):z=t[50];let B;return t[51]!==O||t[52]!==M||t[53]!==N||t[54]!==z?(B=(0,Q.jsxs)(`div`,{className:O,children:[M,se,N,P,z]}),t[51]=O,t[52]=M,t[53]=N,t[54]=z,t[55]=B):B=t[55],B};var Ze=Ne(),Qe=[{value:`hours`,label:`Hours`},{value:`days`,label:`Days`},{value:`weeks`,label:`Weeks`},{value:`months`,label:`Months`}],$e=[{value:`America/New_York`,label:`New York (EST/EDT)`},{value:`America/Chicago`,label:`Chicago (CST/CDT)`},{value:`America/Denver`,label:`Denver (MST/MDT)`},{value:`America/Los_Angeles`,label:`Los Angeles (PST/PDT)`},{value:`America/Toronto`,label:`Toronto (EST/EDT)`},{value:`America/Vancouver`,label:`Vancouver (PST/PDT)`},{value:`America/Mexico_City`,label:`Mexico City (CST)`},{value:`America/Sao_Paulo`,label:`São Paulo (BRT)`},{value:`Europe/London`,label:`London (GMT/BST)`},{value:`Europe/Paris`,label:`Paris (CET/CEST)`},{value:`Europe/Berlin`,label:`Berlin (CET/CEST)`},{value:`Europe/Amsterdam`,label:`Amsterdam (CET/CEST)`},{value:`Europe/Madrid`,label:`Madrid (CET/CEST)`},{value:`Europe/Rome`,label:`Rome (CET/CEST)`},{value:`Europe/Moscow`,label:`Moscow (MSK)`},{value:`Asia/Dubai`,label:`Dubai (GST)`},{value:`Asia/Kolkata`,label:`Mumbai (IST)`},{value:`Asia/Singapore`,label:`Singapore (SGT)`},{value:`Asia/Hong_Kong`,label:`Hong Kong (HKT)`},{value:`Asia/Shanghai`,label:`Shanghai (CST)`},{value:`Asia/Tokyo`,label:`Tokyo (JST)`},{value:`Asia/Seoul`,label:`Seoul (KST)`},{value:`Australia/Sydney`,label:`Sydney (AEST/AEDT)`},{value:`Australia/Melbourne`,label:`Melbourne (AEST/AEDT)`},{value:`Pacific/Auckland`,label:`Auckland (NZST/NZDT)`},{value:`UTC`,label:`UTC`}],$=e=>{let t=(0,Ze.c)(27),{icon:n,title:r,description:i,children:a,variant:o,testId:s}=e,c=o===void 0?`default`:o,l=c===`danger`?`border-destructive/30 bg-destructive/5`:`bg-card`,u;t[0]===l?u=t[1]:(u=J(`rounded-xl border p-4 sm:p-5`,l),t[0]=l,t[1]=u);let ee=c===`danger`?`bg-destructive/10 text-destructive`:`bg-muted text-muted-foreground`,d;t[2]===ee?d=t[3]:(d=J(`flex h-9 w-9 shrink-0 items-center justify-center rounded-lg`,ee),t[2]=ee,t[3]=d);let f;t[4]===n?f=t[5]:(f=(0,Q.jsx)(n,{className:`h-4 w-4`}),t[4]=n,t[5]=f);let p;t[6]!==d||t[7]!==f?(p=(0,Q.jsx)(`div`,{className:d,children:f}),t[6]=d,t[7]=f,t[8]=p):p=t[8];let m=c===`danger`&&`text-destructive`,h;t[9]===m?h=t[10]:(h=J(`text-sm font-semibold`,m),t[9]=m,t[10]=h);let g;t[11]!==h||t[12]!==r?(g=(0,Q.jsx)(`h3`,{className:h,children:r}),t[11]=h,t[12]=r,t[13]=g):g=t[13];let _;t[14]===i?_=t[15]:(_=i&&(0,Q.jsx)(`p`,{className:`mt-0.5 text-xs text-muted-foreground`,children:i}),t[14]=i,t[15]=_);let v;t[16]!==g||t[17]!==_?(v=(0,Q.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[g,_]}),t[16]=g,t[17]=_,t[18]=v):v=t[18];let y;t[19]!==v||t[20]!==p?(y=(0,Q.jsxs)(`div`,{className:`mb-4 flex items-start gap-3`,children:[p,v]}),t[19]=v,t[20]=p,t[21]=y):y=t[21];let b;return t[22]!==a||t[23]!==y||t[24]!==u||t[25]!==s?(b=(0,Q.jsxs)(`div`,{"data-testid":s,className:u,children:[y,a]}),t[22]=a,t[23]=y,t[24]=u,t[25]=s,t[26]=b):b=t[26],b},et=e=>{let t=(0,Ze.c)(7),{value:n,className:r}=e,i;t[0]===r?i=t[1]:(i=J(`relative h-2 w-full overflow-hidden rounded-full bg-primary/20`,r),t[0]=r,t[1]=i);let a=`translateX(-${100-(n||0)}%)`,o;t[2]===a?o=t[3]:(o=(0,Q.jsx)(`div`,{className:`h-full bg-primary transition-all duration-300`,style:{transform:a}}),t[2]=a,t[3]=o);let s;return t[4]!==i||t[5]!==o?(s=(0,Q.jsx)(`div`,{className:i,children:o}),t[4]=i,t[5]=o,t[6]=s):s=t[6],s};const tt=e=>{let t=(0,Ze.c)(227),{isHydrated:n,currentAppearance:r,currentTheme:o,temperatureUnit:s,timezone:l,systemTimezone:u,providerType:d,encryptedOpenRouterApiKey:f,unlockedOpenRouterApiKey:p,encryptedGoogleApiKey:m,unlockedGoogleApiKey:re,encryptedOllamaApiKey:T,unlockedOllamaApiKey:E,openRouterModel:D,openRouterModels:O,googleModel:oe,googleModels:k,isLoadingGoogleModels:A,isLocked:M,masterPassword:se,ollamaModel:N,ollamaBaseUrl:P,ollamaModels:F,ollamaStatus:I,isLoadingOllamaModels:L,isPulling:R,pullProgress:z,isLoadingModels:B,activeCount:ce,archivedCount:le,deletedCount:V,archiveThreshold:H,isImporting:U,onAppearanceChange:ue,onThemeChange:de,onTemperatureUnitChange:fe,onTimezoneChange:pe,onProviderTypeChange:me,onMasterPasswordChange:he,onResetSecurity:ge,onOpenRouterApiKeyChange:_e,onOpenRouterModelChange:ve,onGoogleApiKeyChange:ye,onOllamaApiKeyChange:be,onGoogleModelChange:xe,onOllamaModelChange:W,onOllamaBaseUrlChange:Se,onCheckOllama:Ce,onPullModel:Te,onArchiveThresholdChange:G,onExport:Ee,onImport:De,onClearAll:K,onCleanupDeleted:Oe,onBack:ke}=e,q=n===void 0?!1:n,je=(0,Z.useRef)(null),Me=(0,Z.useRef)(null),Ne=(0,Z.useRef)(null),[Pe,Fe]=(0,Z.useState)(!1),[Ie,Le]=(0,Z.useState)(!1),[Y,Re]=(0,Z.useState)(!1),[X,Ye]=(0,Z.useState)(``),tt=!!se,dt;t[0]!==he||t[1]!==X?(dt=e=>{e.preventDefault(),X&&(he(X),Ye(``))},t[0]=he,t[1]=X,t[2]=dt):dt=t[2];let ft=dt,pt;t[3]===he?pt=t[4]:(pt=()=>{he(null)},t[3]=he,t[4]=pt);let mt=pt,ht;if(t[5]!==D||t[6]!==O){bb0:{let e=(O||[]).filter(nt);if(!D){ht=e.slice(0,20);break bb0}let t=D.toLowerCase();ht=e.filter(e=>e.id&&e.id.toLowerCase().includes(t)||e.name&&e.name.toLowerCase().includes(t)).slice(0,20)}t[5]=D,t[6]=O,t[7]=ht}else ht=t[7];let gt=ht,_t;if(t[8]!==N||t[9]!==F){bb1:{let e=(F||[]).filter(rt);if(!N){_t=e.slice(0,20);break bb1}let t=N.toLowerCase();_t=e.filter(e=>e.name&&e.name.toLowerCase().includes(t)||e.model&&e.model.toLowerCase().includes(t)).slice(0,20)}t[8]=N,t[9]=F,t[10]=_t}else _t=t[10];let vt=_t,yt;t[11]===F?yt=t[12]:(yt=F||[],t[11]=F,t[12]=yt);let bt;if(t[13]!==N||t[14]!==yt){let e;t[16]===N?e=t[17]:(e=e=>e&&(e.name===N||e.model===N),t[16]=N,t[17]=e),bt=yt.some(e),t[13]=N,t[14]=yt,t[15]=bt}else bt=t[15];let xt=bt,St,Ct;t[18]===Symbol.for(`react.memo_cache_sentinel`)?(St=()=>{let e=e=>{Me.current&&!Me.current.contains(e.target)&&Fe(!1),Ne.current&&!Ne.current.contains(e.target)&&Le(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},Ct=[],t[18]=St,t[19]=Ct):(St=t[18],Ct=t[19]),(0,Z.useEffect)(St,Ct);let wt;t[20]===De?wt=t[21]:(wt=e=>{let t=e.target.files?.[0];t&&(De(t,`merge`),e.target.value=``)},t[20]=De,t[21]=wt);let Tt=wt,Et=ce+le+V,Dt;t[22]===Symbol.for(`react.memo_cache_sentinel`)?(Dt=(0,Q.jsx)(g,{className:`h-5 w-5`}),t[22]=Dt):Dt=t[22];let Ot;t[23]===ke?Ot=t[24]:(Ot=(0,Q.jsx)(j,{"data-testid":`settings-back-button`,variant:`ghost`,size:`icon`,onClick:ke,className:`h-10 w-10`,children:Dt}),t[23]=ke,t[24]=Ot);let kt;t[25]===Symbol.for(`react.memo_cache_sentinel`)?(kt=(0,Q.jsx)(`h1`,{"data-testid":`settings-title`,className:`text-lg font-semibold`,children:`Settings`}),t[25]=kt):kt=t[25];let At;t[26]===Ot?At=t[27]:(At=(0,Q.jsxs)(`header`,{"data-testid":`settings-header`,className:`flex h-14 shrink-0 items-center gap-2 border-b px-3`,children:[Ot,kt]}),t[26]=Ot,t[27]=At);let jt;t[28]!==r||t[29]!==q||t[30]!==ue?(jt=(0,Q.jsx)($,{icon:Ke,title:`Appearance`,description:`Choose your preferred color mode`,testId:`settings-section-appearance`,children:q?(0,Q.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:[{value:`light`,icon:Ke,label:`Light`},{value:`dark`,icon:Ge,label:`Dark`},{value:`system`,icon:We,label:`System`}].map(e=>{let{value:t,icon:n,label:i}=e;return(0,Q.jsxs)(`button`,{id:`appearance-button-${t}`,type:`button`,"data-testid":`appearance-button-${t}`,onClick:()=>ue(t),className:J(`flex flex-1 min-w-[90px] items-center justify-center gap-2 rounded-lg border px-4 py-2.5 text-sm font-medium transition-all`,r===t?`border-primary bg-primary text-primary-foreground`:`border-border bg-background hover:bg-muted`),children:[(0,Q.jsx)(n,{className:`h-4 w-4`}),i]},t)})}):(0,Q.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:[1,2,3].map(at)})}),t[28]=r,t[29]=q,t[30]=ue,t[31]=jt):jt=t[31];let Mt;t[32]!==o||t[33]!==q||t[34]!==de?(Mt=(0,Q.jsx)($,{icon:w,title:`Theme`,description:`Select a color palette for the interface`,testId:`settings-section-theme`,children:q?(0,Q.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:[{value:`default`,icon:v,label:`Default`},{value:`vibrant`,icon:w,label:`Vibrant`}].map(e=>{let{value:t,icon:n,label:r}=e;return(0,Q.jsxs)(`button`,{id:`theme-button-${t}`,type:`button`,"data-testid":`theme-button-${t}`,onClick:()=>de(t),className:J(`flex flex-1 min-w-[120px] items-center justify-center gap-2 rounded-lg border px-4 py-2.5 text-sm font-medium transition-all`,o===t?`border-primary bg-primary text-primary-foreground`:`border-border bg-background hover:bg-muted`),children:[(0,Q.jsx)(n,{className:`h-4 w-4`}),r]},t)})}):(0,Q.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:[1,2].map(ot)})}),t[32]=o,t[33]=q,t[34]=de,t[35]=Mt):Mt=t[35];let Nt;t[36]!==q||t[37]!==fe||t[38]!==s?(Nt=(0,Q.jsx)($,{icon:qe,title:`Temperature Units`,description:`Choose how temperatures are displayed`,testId:`settings-section-temperature`,children:q?(0,Q.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:[{value:`auto`,label:`Auto`,description:`Based on your locale`},{value:`fahrenheit`,label:`°F`,description:`Fahrenheit`},{value:`celsius`,label:`°C`,description:`Celsius`}].map(e=>{let{value:t,label:n,description:r}=e;return(0,Q.jsxs)(`button`,{id:`temp-unit-button-${t}`,type:`button`,"data-testid":`temp-unit-button-${t}`,onClick:()=>fe(t),className:J(`flex flex-1 min-w-[90px] flex-col items-center justify-center gap-0.5 rounded-lg border px-4 py-2.5 transition-all`,s===t?`border-primary bg-primary text-primary-foreground`:`border-border bg-background hover:bg-muted`),children:[(0,Q.jsx)(`span`,{className:`text-sm font-medium`,children:n}),(0,Q.jsx)(`span`,{className:J(`text-[10px]`,s===t?`text-primary-foreground/70`:`text-muted-foreground`),children:r})]},t)})}):(0,Q.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:[1,2,3].map(st)})}),t[36]=q,t[37]=fe,t[38]=s,t[39]=Nt):Nt=t[39];let Pt;t[40]!==q||t[41]!==pe||t[42]!==u||t[43]!==l?(Pt=q?(0,Q.jsxs)(`button`,{type:`button`,"data-testid":`timezone-auto-button`,onClick:()=>pe(`auto`),className:J(`flex w-full items-center justify-between rounded-lg border px-4 py-3 transition-all`,l===`auto`?`border-primary bg-primary text-primary-foreground`:`border-border bg-background hover:bg-muted`),children:[(0,Q.jsxs)(`div`,{className:`flex flex-col items-start`,children:[(0,Q.jsx)(`span`,{className:`text-sm font-medium`,children:`Auto (System)`}),(0,Q.jsx)(`span`,{className:J(`text-xs flex items-center h-4`,l===`auto`?`text-primary-foreground/70`:`text-muted-foreground`),children:u??(0,Q.jsx)(`span`,{className:`inline-block h-3 w-24 animate-pulse rounded bg-current/20`})})]}),l===`auto`&&(0,Q.jsx)(`span`,{className:`text-xs font-medium`,children:`Selected`})]}):(0,Q.jsx)(_,{className:`h-[66px] w-full rounded-lg`}),t[40]=q,t[41]=pe,t[42]=u,t[43]=l,t[44]=Pt):Pt=t[44];let Ft;t[45]===Symbol.for(`react.memo_cache_sentinel`)?(Ft=(0,Q.jsx)(`label`,{htmlFor:`timezone-select`,className:`text-xs text-muted-foreground`,children:`Or choose a specific timezone:`}),t[45]=Ft):Ft=t[45];let It=!q,Lt=l===`auto`?``:l,Rt;t[46]===pe?Rt=t[47]:(Rt=e=>pe(e),t[46]=pe,t[47]=Rt);let zt;t[48]===Symbol.for(`react.memo_cache_sentinel`)?(zt=(0,Q.jsx)(x,{id:`timezone-select`,"data-testid":`timezone-select-trigger`,className:`w-full bg-background text-foreground`,children:(0,Q.jsx)(y,{placeholder:`Select timezone...`})}),t[48]=zt):zt=t[48];let Bt;t[49]===Symbol.for(`react.memo_cache_sentinel`)?(Bt=(0,Q.jsx)(ne,{children:$e.map(ct)}),t[49]=Bt):Bt=t[49];let Vt;t[50]!==It||t[51]!==Lt||t[52]!==Rt?(Vt=(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[Ft,(0,Q.jsxs)(C,{name:`timezone`,disabled:It,value:Lt,onValueChange:Rt,children:[zt,Bt]})]}),t[50]=It,t[51]=Lt,t[52]=Rt,t[53]=Vt):Vt=t[53];let Ht;t[54]!==Pt||t[55]!==Vt?(Ht=(0,Q.jsx)($,{icon:He,title:`Timezone`,description:`Set your preferred timezone for date/time display`,testId:`settings-section-timezone`,children:(0,Q.jsxs)(`div`,{className:`space-y-3`,children:[Pt,Vt]})}),t[54]=Pt,t[55]=Vt,t[56]=Ht):Ht=t[56];let Ut;t[57]!==mt||t[58]!==ft||t[59]!==M||t[60]!==tt||t[61]!==ge||t[62]!==X?(Ut=(0,Q.jsx)($,{icon:ee,title:`Security`,description:`Manage your master password to lock/unlock API keys`,testId:`settings-section-security`,children:(0,Q.jsx)(`div`,{className:`space-y-4`,children:M?(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsx)(`p`,{className:`text-xs text-muted-foreground`,children:`Enter your master password to unlock and manage your API keys.`}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(`input`,{type:`text`,name:`username`,value:`ai-chat-user`,readOnly:!0,autoComplete:`username`,className:`sr-only`,"aria-hidden":`true`,tabIndex:-1}),(0,Q.jsx)(`input`,{type:`password`,value:X,onChange:e=>Ye(e.target.value),placeholder:`Master Password`,autoComplete:`current-password`,className:`flex-1 rounded-md border bg-background px-3 py-2 text-sm shadow-sm transition-colors focus:border-primary focus:outline-none`,onKeyDown:e=>e.key===`Enter`&&ft(e)}),(0,Q.jsx)(j,{type:`button`,onClick:ft,disabled:!X,children:`Unlock`})]}),(0,Q.jsx)(`button`,{type:`button`,onClick:ge,className:`text-[10px] text-destructive hover:underline self-start`,children:`Forgot password? Reset security settings`})]}):tt?(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between gap-4 rounded-lg bg-green-500/10 p-3 border border-green-500/20`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 text-green-600 dark:text-green-400`,children:[(0,Q.jsx)(`div`,{className:`h-2 w-2 rounded-full bg-current animate-pulse`}),(0,Q.jsx)(`span`,{className:`text-sm font-medium`,children:`Session Unlocked`})]}),(0,Q.jsx)(`div`,{className:`flex gap-2`,children:(0,Q.jsx)(j,{type:`button`,variant:`outline`,size:`sm`,onClick:mt,className:`h-8`,children:`Lock`})})]}),(0,Q.jsxs)(`div`,{className:`flex flex-col gap-2 pt-2 border-t`,children:[(0,Q.jsx)(`p`,{className:`text-[10px] text-muted-foreground`,children:`Forgotten your password? You can reset it, but this will erase all stored API keys.`}),(0,Q.jsx)(j,{type:`button`,variant:`ghost`,size:`sm`,onClick:ge,className:`h-8 text-destructive hover:text-destructive hover:bg-destructive/10 self-start`,children:`Reset Master Password`})]})]}):(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsx)(`p`,{className:`text-xs text-muted-foreground`,children:`Set a master password to encrypt your API keys. This password is only stored in memory for the current session.`}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(`input`,{type:`text`,name:`username`,value:`ai-chat-user`,readOnly:!0,autoComplete:`username`,className:`sr-only`,"aria-hidden":`true`,tabIndex:-1}),(0,Q.jsx)(`input`,{type:`password`,value:X,onChange:e=>Ye(e.target.value),placeholder:`New Master Password`,autoComplete:`new-password`,className:`flex-1 rounded-md border bg-background px-3 py-2 text-sm shadow-sm transition-colors focus:border-primary focus:outline-none`,onKeyDown:e=>e.key===`Enter`&&ft(e)}),(0,Q.jsx)(j,{type:`button`,onClick:ft,disabled:!X,children:`Set Password`})]})]})})}),t[57]=mt,t[58]=ft,t[59]=M,t[60]=tt,t[61]=ge,t[62]=X,t[63]=Ut):Ut=t[63];let Wt;t[64]!==q||t[65]!==me||t[66]!==d?(Wt=q?(0,Q.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:we.map(e=>{let{id:t,label:n,description:r}=e;return(0,Q.jsxs)(`button`,{id:`provider-button-${t}`,type:`button`,"data-testid":`provider-button-${t}`,onClick:()=>me(t),className:J(`flex flex-1 min-w-[120px] flex-col items-center justify-center gap-0.5 rounded-lg border px-4 py-2.5 transition-all`,d===t?`border-primary bg-primary text-primary-foreground`:`border-border bg-background hover:bg-muted`),children:[(0,Q.jsx)(`span`,{className:`text-sm font-medium`,children:n}),(0,Q.jsx)(`span`,{className:J(`text-[10px]`,d===t?`text-primary-foreground/70`:`text-muted-foreground`),children:r})]},t)})}):(0,Q.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[(0,Q.jsx)(_,{className:`h-[58px] flex-1 min-w-[120px] rounded-lg`}),(0,Q.jsx)(_,{className:`h-[58px] flex-1 min-w-[120px] rounded-lg`})]}),t[64]=q,t[65]=me,t[66]=d,t[67]=Wt):Wt=t[67];let Gt;t[68]!==m||t[69]!==T||t[70]!==f||t[71]!==gt||t[72]!==vt||t[73]!==oe||t[74]!==k||t[75]!==q||t[76]!==A||t[77]!==B||t[78]!==L||t[79]!==M||t[80]!==xt||t[81]!==R||t[82]!==P||t[83]!==N||t[84]!==I||t[85]!==Ce||t[86]!==ye||t[87]!==xe||t[88]!==be||t[89]!==Se||t[90]!==W||t[91]!==_e||t[92]!==ve||t[93]!==Te||t[94]!==D||t[95]!==d||t[96]!==z||t[97]!==Y||t[98]!==Ie||t[99]!==Pe||t[100]!==re||t[101]!==E||t[102]!==p?(Gt=(0,Q.jsx)(`div`,{className:`min-h-[220px]`,children:q?(0,Q.jsx)(`div`,{className:`h-full`,children:d===`open-router`?(0,Q.jsxs)(`div`,{className:`space-y-4 rounded-lg bg-muted/50 p-4 animate-in fade-in duration-300`,children:[(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(Ue,{className:`h-3.5 w-3.5 text-muted-foreground`}),(0,Q.jsx)(`label`,{className:`text-xs font-semibold uppercase tracking-wider text-muted-foreground`,children:`API Key`})]}),(0,Q.jsxs)(`div`,{className:`relative`,children:[(0,Q.jsx)(`input`,{type:Y?`text`:`password`,value:p||``,onChange:e=>_e(e.target.value),disabled:M,autoComplete:`off`,placeholder:f?`•••••••• (Saved)`:`sk-or-...`,className:`w-full rounded-md border bg-background px-3 py-2 text-sm shadow-sm transition-colors focus:border-primary focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`}),!M&&(0,Q.jsx)(`button`,{type:`button`,onClick:()=>Re(!Y),className:`absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground`,children:Y?(0,Q.jsx)(Be,{className:`h-4 w-4`}):(0,Q.jsx)(Ve,{className:`h-4 w-4`})})]}),M&&f&&(0,Q.jsx)(`p`,{className:`text-[10px] text-muted-foreground`,children:`Unlock session to manage this key`})]}),(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(ae,{className:`h-3.5 w-3.5 text-muted-foreground`}),(0,Q.jsx)(`label`,{className:`text-xs font-semibold uppercase tracking-wider text-muted-foreground`,children:`Model`})]}),B&&(0,Q.jsx)(c,{className:`h-3 w-3 animate-spin text-muted-foreground`})]}),(0,Q.jsxs)(`div`,{className:`relative`,ref:Me,children:[(0,Q.jsx)(`input`,{value:D,onChange:e=>{ve(e.target.value),Fe(!0)},onFocus:()=>Fe(!0),autoComplete:`openRouter-llm-model`,placeholder:`google/gemini-2.0-flash-exp:free`,className:`w-full rounded-md border bg-background px-3 py-2 text-sm shadow-sm transition-colors focus:border-primary focus:outline-none`}),Pe&&gt.length>0&&(0,Q.jsx)(`div`,{className:`absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover p-1 shadow-md animate-in fade-in zoom-in-95`,children:gt.map(e=>(0,Q.jsxs)(`button`,{type:`button`,onClick:()=>{ve(e.id),Fe(!1)},className:`w-full rounded-sm px-2 py-1.5 text-left text-sm hover:bg-accent hover:text-accent-foreground`,children:[(0,Q.jsx)(`div`,{className:`font-medium`,children:e.name||e.id}),(0,Q.jsx)(`div`,{className:`text-[10px] text-muted-foreground`,children:e.id})]},e.id))})]})]})]}):d===`google`?(0,Q.jsxs)(`div`,{className:`space-y-4 rounded-lg bg-muted/50 p-4 animate-in fade-in duration-300`,children:[(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(Ue,{className:`h-3.5 w-3.5 text-muted-foreground`}),(0,Q.jsx)(`label`,{className:`text-xs font-semibold uppercase tracking-wider text-muted-foreground`,children:`API Key`})]}),(0,Q.jsxs)(`div`,{className:`relative`,children:[(0,Q.jsx)(`input`,{type:Y?`text`:`password`,value:re||``,onChange:e=>ye(e.target.value),disabled:M,autoComplete:`off`,placeholder:m?`•••••••• (Saved)`:`Enter Gemini API Key`,className:`w-full rounded-md border bg-background px-3 py-2 text-sm shadow-sm transition-colors focus:border-primary focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`}),!M&&(0,Q.jsx)(`button`,{type:`button`,onClick:()=>Re(!Y),className:`absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground`,children:Y?(0,Q.jsx)(Be,{className:`h-4 w-4`}):(0,Q.jsx)(Ve,{className:`h-4 w-4`})})]}),M&&m&&(0,Q.jsx)(`p`,{className:`text-[10px] text-muted-foreground`,children:`Unlock session to manage this key`})]}),(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(ae,{className:`h-3.5 w-3.5 text-muted-foreground`}),(0,Q.jsx)(`label`,{className:`text-xs font-semibold uppercase tracking-wider text-muted-foreground`,children:`Model`})]}),A&&(0,Q.jsx)(c,{className:`h-3 w-3 animate-spin text-muted-foreground`})]}),(0,Q.jsxs)(C,{value:oe,onValueChange:e=>xe(e),disabled:k.length===0&&!A,children:[(0,Q.jsx)(x,{className:`w-full bg-background`,children:(0,Q.jsx)(y,{placeholder:A?`Loading models...`:k.length>0?`Select model...`:`Enter API key to load models`})}),(0,Q.jsx)(ne,{children:k.length>0?k.map(lt):(0,Q.jsx)(S,{value:`gemini-2.0-flash-exp`,children:`Gemini 2.0 Flash Exp (Default)`})})]})]})]}):d===`ollama`?(0,Q.jsxs)(`div`,{className:`space-y-4 rounded-lg bg-muted/50 p-4 animate-in fade-in duration-300`,children:[(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(Ue,{className:`h-3.5 w-3.5 text-muted-foreground`}),(0,Q.jsx)(`label`,{className:`text-xs font-semibold uppercase tracking-wider text-muted-foreground`,children:`API Key (Optional)`})]}),(0,Q.jsxs)(`div`,{className:`relative`,children:[(0,Q.jsx)(`input`,{type:Y?`text`:`password`,value:E||``,onChange:e=>be(e.target.value),disabled:M,autoComplete:`off`,placeholder:T?`•••••••• (Saved)`:`Optional key for proxies`,className:`w-full rounded-md border bg-background px-3 py-2 text-sm shadow-sm transition-colors focus:border-primary focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed`}),!M&&(0,Q.jsx)(`button`,{type:`button`,onClick:()=>Re(!Y),className:`absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground`,children:Y?(0,Q.jsx)(Be,{className:`h-4 w-4`}):(0,Q.jsx)(Ve,{className:`h-4 w-4`})})]}),M&&T&&(0,Q.jsx)(`p`,{className:`text-[10px] text-muted-foreground`,children:`Unlock session to manage this key`})]}),(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(h,{className:`h-3.5 w-3.5 text-muted-foreground`}),(0,Q.jsx)(`label`,{className:`text-xs font-semibold uppercase tracking-wider text-muted-foreground`,children:`Base URL`})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[I===`checking`&&(0,Q.jsx)(c,{className:`h-3 w-3 animate-spin text-muted-foreground`}),I===`available`&&(0,Q.jsxs)(`span`,{className:`flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider text-green-600 dark:text-green-400`,children:[(0,Q.jsx)(`span`,{className:`h-1.5 w-1.5 rounded-full bg-current`}),`Online`]}),I===`unavailable`&&(0,Q.jsxs)(`span`,{className:`flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider text-destructive`,children:[(0,Q.jsx)(`span`,{className:`h-1.5 w-1.5 rounded-full bg-current`}),`Offline`]})]})]}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(`input`,{value:P,onChange:e=>Se(e.target.value),autoComplete:`ollama-base-url`,placeholder:`http://localhost:11434`,className:`flex-1 rounded-md border bg-background px-3 py-2 text-sm shadow-sm transition-colors focus:border-primary focus:outline-none`}),(0,Q.jsx)(j,{type:`button`,variant:`outline`,size:`sm`,className:`h-9 px-3`,onClick:Ce,disabled:I===`checking`||!P,children:`Check`})]})]}),(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(ae,{className:`h-3.5 w-3.5 text-muted-foreground`}),(0,Q.jsx)(`label`,{className:`text-xs font-semibold uppercase tracking-wider text-muted-foreground`,children:`Model`})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[L&&(0,Q.jsx)(c,{className:`h-3 w-3 animate-spin text-muted-foreground`}),xt&&(0,Q.jsx)(`span`,{className:`text-[10px] bg-green-500/10 text-green-600 dark:text-green-400 px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wider`,children:`Installed`})]})]}),(0,Q.jsx)(`div`,{className:`relative`,ref:Ne,children:(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsxs)(`div`,{className:`relative flex-1`,children:[(0,Q.jsx)(`input`,{value:N,onChange:e=>{W(e.target.value),Le(!0)},onFocus:()=>Le(!0),autoComplete:`ollama-llm-model`,placeholder:`deepseek-r1:1.5b`,className:`w-full rounded-md border bg-background px-3 py-2 text-sm shadow-sm transition-colors focus:border-primary focus:outline-none`}),Ie&&vt.length>0&&(0,Q.jsx)(`div`,{className:`absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover p-1 shadow-md animate-in fade-in zoom-in-95`,children:vt.map(e=>(0,Q.jsxs)(`button`,{type:`button`,onClick:()=>{W(e.name||e.model),Le(!1)},className:`w-full rounded-sm px-2 py-1.5 text-left text-sm hover:bg-accent hover:text-accent-foreground`,children:[(0,Q.jsx)(`div`,{className:`font-medium`,children:e.name||e.model}),e.details?.parameter_size&&(0,Q.jsxs)(`div`,{className:`text-[10px] text-muted-foreground`,children:[e.details.parameter_size,` parameters`]})]},e.name||e.model))})]}),(0,Q.jsxs)(j,{type:`button`,size:`sm`,variant:xt?`outline`:`default`,className:`h-9 gap-2 px-3`,onClick:Te,disabled:R||!N,children:[R?(0,Q.jsx)(c,{className:`h-4 w-4 animate-spin`}):(0,Q.jsx)(ze,{className:`h-4 w-4`}),(0,Q.jsx)(`span`,{className:`hidden sm:inline`,children:xt?`Update`:`Pull`})]})]})})]}),R&&z&&(0,Q.jsxs)(`div`,{className:`space-y-2 bg-background/50 p-3 rounded-lg border border-primary/20 animate-in slide-in-from-top-2 duration-300`,children:[(0,Q.jsxs)(`div`,{className:`flex justify-between text-[10px] font-bold uppercase tracking-wider`,children:[(0,Q.jsx)(`span`,{className:`text-primary truncate mr-2`,children:z.status}),z.total&&z.total>0&&z.completed!==void 0&&(0,Q.jsxs)(`span`,{className:`text-muted-foreground`,children:[Math.round(z.completed/z.total*100),`%`]})]}),(0,Q.jsx)(et,{value:z.total&&z.total>0&&z.completed!==void 0?z.completed/z.total*100:0})]})]}):d===`prompt-api`?(0,Q.jsxs)(`div`,{className:`space-y-4 rounded-lg bg-muted/50 p-4 animate-in fade-in duration-300`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,Q.jsx)(`div`,{className:`rounded-full bg-primary/10 p-2`,children:(0,Q.jsx)(w,{className:`h-5 w-5 text-primary`})}),(0,Q.jsxs)(`div`,{children:[(0,Q.jsx)(`h4`,{className:`text-sm font-semibold`,children:`Browser Built-in AI`}),(0,Q.jsx)(`p`,{className:`text-xs text-muted-foreground`,children:`Using Gemini Nano running directly in your browser.`})]})]}),(0,Q.jsx)(`div`,{className:`rounded-md border border-primary/20 bg-primary/5 p-3`,children:(0,Q.jsx)(`p`,{className:`text-[11px] leading-relaxed text-primary/80`,children:`This provider uses your device's hardware and doesn't require an internet connection or API keys.`})})]}):null}):(0,Q.jsxs)(`div`,{className:`space-y-4 rounded-lg bg-muted/50 p-4`,children:[(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(_,{className:`h-3.5 w-3.5 rounded-full`}),(0,Q.jsx)(_,{className:`h-3 w-16`})]}),(0,Q.jsx)(_,{className:`h-3 w-12`})]}),(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(_,{className:`h-9 flex-1 rounded-md`}),(0,Q.jsx)(_,{className:`h-9 w-16 rounded-md`})]})]}),(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,Q.jsx)(_,{className:`h-3.5 w-3.5 rounded-full`}),(0,Q.jsx)(_,{className:`h-3 w-12`})]}),(0,Q.jsx)(_,{className:`h-9 w-full rounded-md`})]})]})}),t[68]=m,t[69]=T,t[70]=f,t[71]=gt,t[72]=vt,t[73]=oe,t[74]=k,t[75]=q,t[76]=A,t[77]=B,t[78]=L,t[79]=M,t[80]=xt,t[81]=R,t[82]=P,t[83]=N,t[84]=I,t[85]=Ce,t[86]=ye,t[87]=xe,t[88]=be,t[89]=Se,t[90]=W,t[91]=_e,t[92]=ve,t[93]=Te,t[94]=D,t[95]=d,t[96]=z,t[97]=Y,t[98]=Ie,t[99]=Pe,t[100]=re,t[101]=E,t[102]=p,t[103]=Gt):Gt=t[103];let Kt;t[104]!==Wt||t[105]!==Gt?(Kt=(0,Q.jsx)($,{icon:v,title:`AI Provider`,description:`Choose which AI backend to use`,testId:`settings-section-ai-provider`,children:(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[Wt,Gt]})}),t[104]=Wt,t[105]=Gt,t[106]=Kt):Kt=t[106];let qt;t[107]===Symbol.for(`react.memo_cache_sentinel`)?(qt=(0,Q.jsx)(`label`,{htmlFor:`auto-archive-switch`,className:`text-sm font-medium text-foreground cursor-pointer`,children:`Auto-archive inactive chats`}),t[107]=qt):qt=t[107];let Jt=!q,Yt;t[108]!==H.unit||t[109]!==H.value||t[110]!==G?(Yt=()=>G({value:H.value===0?2:0,unit:H.unit}),t[108]=H.unit,t[109]=H.value,t[110]=G,t[111]=Yt):Yt=t[111];let Xt=H.value>0?`border-primary bg-primary`:`border-muted-foreground/30 bg-muted`,Zt=!q&&`opacity-70`,Qt;t[112]!==Xt||t[113]!==Zt?(Qt=J(`relative h-6 w-11 shrink-0 rounded-full border-2 transition-colors`,Xt,Zt),t[112]=Xt,t[113]=Zt,t[114]=Qt):Qt=t[114];let $t=H.value>0?`translate-x-5 bg-primary-foreground`:`bg-foreground dark:bg-muted-foreground`,en;t[115]===$t?en=t[116]:(en=J(`absolute left-0.5 top-0.5 h-4 w-4 rounded-full shadow-md transition-transform`,$t),t[115]=$t,t[116]=en);let tn;t[117]===en?tn=t[118]:(tn=(0,Q.jsx)(`span`,{className:en}),t[117]=en,t[118]=tn);let nn;t[119]!==Jt||t[120]!==Yt||t[121]!==Qt||t[122]!==tn?(nn=(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[qt,(0,Q.jsx)(`button`,{id:`auto-archive-switch`,type:`button`,"data-testid":`auto-archive-toggle`,disabled:Jt,onClick:Yt,className:Qt,children:tn})]}),t[119]=Jt,t[120]=Yt,t[121]=Qt,t[122]=tn,t[123]=nn):nn=t[123];let rn=H.value>0?`h-[60px] opacity-100 mt-4`:`h-0 opacity-0`,an;t[124]===rn?an=t[125]:(an=J(`overflow-hidden transition-all duration-300 ease-in-out`,rn),t[124]=rn,t[125]=an);let on=!q&&`opacity-70`,sn;t[126]===on?sn=t[127]:(sn=J(`flex items-center justify-between gap-3 rounded-lg bg-muted/50 p-3`,on),t[126]=on,t[127]=sn);let cn;t[128]===Symbol.for(`react.memo_cache_sentinel`)?(cn=(0,Q.jsx)(`label`,{htmlFor:`archive-threshold-value`,className:`text-sm text-muted-foreground`,children:`Archive after`}),t[128]=cn):cn=t[128];let ln=!q,un;t[129]!==H.unit||t[130]!==G?(un=e=>G({value:Math.max(1,e),unit:H.unit}),t[129]=H.unit,t[130]=G,t[131]=un):un=t[131];let dn;t[132]!==H.value||t[133]!==ln||t[134]!==un?(dn=(0,Q.jsx)(Xe,{id:`archive-threshold-value`,value:H.value,disabled:ln,onChange:un,min:1,max:999,allowManualInput:!0}),t[132]=H.value,t[133]=ln,t[134]=un,t[135]=dn):dn=t[135];let fn=!q,pn;t[136]!==H.value||t[137]!==G?(pn=e=>G({value:H.value,unit:e}),t[136]=H.value,t[137]=G,t[138]=pn):pn=t[138];let mn;t[139]===Symbol.for(`react.memo_cache_sentinel`)?(mn=(0,Q.jsx)(x,{id:`archive-threshold-unit`,className:`h-9 w-[100px] bg-background text-foreground`,children:(0,Q.jsx)(y,{})}),t[139]=mn):mn=t[139];let hn;t[140]===Symbol.for(`react.memo_cache_sentinel`)?(hn=(0,Q.jsx)(ne,{children:Qe.map(ut)}),t[140]=hn):hn=t[140];let gn;t[141]!==H.unit||t[142]!==fn||t[143]!==pn?(gn=(0,Q.jsxs)(C,{name:`archive-threshold-unit`,disabled:fn,value:H.unit,onValueChange:pn,children:[mn,hn]}),t[141]=H.unit,t[142]=fn,t[143]=pn,t[144]=gn):gn=t[144];let _n;t[145]!==dn||t[146]!==gn?(_n=(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[dn,gn]}),t[145]=dn,t[146]=gn,t[147]=_n):_n=t[147];let vn;t[148]!==sn||t[149]!==_n?(vn=(0,Q.jsxs)(`div`,{className:sn,children:[cn,_n]}),t[148]=sn,t[149]=_n,t[150]=vn):vn=t[150];let yn;t[151]!==an||t[152]!==vn?(yn=(0,Q.jsx)(`div`,{className:an,children:vn}),t[151]=an,t[152]=vn,t[153]=yn):yn=t[153];let bn;t[154]!==H.unit||t[155]!==H.value?(bn=H.value>0&&(0,Q.jsxs)(`p`,{className:`text-xs text-muted-foreground mt-2 animate-in fade-in duration-300`,children:[`Chats inactive for`,` `,H.value,` `,H.value===1?H.unit.slice(0,-1):H.unit,` `,`will be archived automatically.`]}),t[154]=H.unit,t[155]=H.value,t[156]=bn):bn=t[156];let xn;t[157]===bn?xn=t[158]:(xn=(0,Q.jsx)(`div`,{className:`min-h-[16px]`,children:bn}),t[157]=bn,t[158]=xn);let Sn;t[159]!==nn||t[160]!==yn||t[161]!==xn?(Sn=(0,Q.jsx)($,{icon:a,title:`Auto-Archive`,description:`Archive inactive chats automatically`,testId:`settings-section-auto-archive`,children:(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[nn,yn,xn]})}),t[159]=nn,t[160]=yn,t[161]=xn,t[162]=Sn):Sn=t[162];let Cn;t[163]!==ce||t[164]!==le||t[165]!==V||t[166]!==q?(Cn=(0,Q.jsx)(`div`,{className:`mb-4 grid grid-cols-3 gap-2`,children:[{id:`active`,label:`Active`,count:ce,bg:`bg-muted/50`,text:`text-foreground`},{id:`archived`,label:`Archived`,count:le,bg:`bg-amber-500/10`,text:`text-amber-600 dark:text-amber-400`},{id:`deleted`,label:`In Trash`,count:V,bg:`bg-destructive/10`,text:`text-destructive`}].map(e=>(0,Q.jsxs)(`div`,{"data-testid":`stat-${e.id}`,className:J(`rounded-lg p-3 text-center min-h-[68px] flex flex-col justify-center`,e.bg),children:[(0,Q.jsx)(`div`,{"data-testid":`stat-${e.id}-count`,className:J(`text-lg font-semibold h-7 flex items-center justify-center`,e.text),children:q?e.count:(0,Q.jsx)(_,{className:`h-5 w-8`})}),(0,Q.jsx)(`div`,{className:`text-[10px] text-muted-foreground`,children:e.label})]},e.id))}),t[163]=ce,t[164]=le,t[165]=V,t[166]=q,t[167]=Cn):Cn=t[167];let wn;t[168]===Tt?wn=t[169]:(wn=(0,Q.jsx)(`input`,{ref:je,type:`file`,accept:`.json`,className:`hidden`,onChange:Tt,"data-testid":`import-file-input`}),t[168]=Tt,t[169]=wn);let Tn=ce+le===0,En;t[170]===Symbol.for(`react.memo_cache_sentinel`)?(En=(0,Q.jsx)(ze,{className:`h-4 w-4`}),t[170]=En):En=t[170];let Dn;t[171]!==Ee||t[172]!==Tn?(Dn=(0,Q.jsxs)(j,{"data-testid":`export-button`,variant:`outline`,size:`sm`,onClick:Ee,disabled:Tn,className:`gap-2`,type:`button`,children:[En,`Export`]}),t[171]=Ee,t[172]=Tn,t[173]=Dn):Dn=t[173];let On;t[174]===Symbol.for(`react.memo_cache_sentinel`)?(On=()=>je.current?.click(),t[174]=On):On=t[174];let kn;t[175]===U?kn=t[176]:(kn=U?(0,Q.jsx)(c,{className:`h-4 w-4 animate-spin`}):(0,Q.jsx)(Je,{className:`h-4 w-4`}),t[175]=U,t[176]=kn);let An;t[177]!==U||t[178]!==kn?(An=(0,Q.jsxs)(j,{"data-testid":`import-button`,variant:`outline`,size:`sm`,onClick:On,disabled:U,className:`gap-2`,type:`button`,children:[kn,`Import`]}),t[177]=U,t[178]=kn,t[179]=An):An=t[179];let jn;t[180]!==Dn||t[181]!==An?(jn=(0,Q.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[Dn,An]}),t[180]=Dn,t[181]=An,t[182]=jn):jn=t[182];let Mn;t[183]===Symbol.for(`react.memo_cache_sentinel`)?(Mn=(0,Q.jsx)(`p`,{className:`mt-3 text-xs text-muted-foreground`,children:`Export creates a backup file. Deleted chats are excluded.`}),t[183]=Mn):Mn=t[183];let Nn;t[184]!==Cn||t[185]!==wn||t[186]!==jn?(Nn=(0,Q.jsxs)($,{icon:b,title:`Chat History`,description:`Manage your conversation data`,testId:`settings-section-chat-history`,children:[Cn,wn,jn,Mn]}),t[184]=Cn,t[185]=wn,t[186]=jn,t[187]=Nn):Nn=t[187];let Pn;t[188]!==V||t[189]!==q?(Pn=q?V===0?`Trash is empty`:(0,Q.jsxs)(Q.Fragment,{children:[V,` item`,V===1?``:`s`,` in trash`]}):(0,Q.jsx)(_,{className:`h-4 w-32`}),t[188]=V,t[189]=q,t[190]=Pn):Pn=t[190];let Fn;t[191]===Pn?Fn=t[192]:(Fn=(0,Q.jsx)(`div`,{"data-testid":`trash-status`,className:`text-sm text-muted-foreground flex items-center h-9`,children:Pn}),t[191]=Pn,t[192]=Fn);let In=V===0,Ln;t[193]===Symbol.for(`react.memo_cache_sentinel`)?(Ln=(0,Q.jsx)(ie,{className:`h-4 w-4`}),t[193]=Ln):Ln=t[193];let Rn;t[194]!==Oe||t[195]!==In?(Rn=(0,Q.jsxs)(j,{"data-testid":`empty-trash-button`,variant:`outline`,size:`sm`,onClick:Oe,disabled:In,className:`gap-2 text-destructive hover:text-destructive hover:bg-destructive/10`,children:[Ln,`Empty Trash`]}),t[194]=Oe,t[195]=In,t[196]=Rn):Rn=t[196];let zn;t[197]!==Fn||t[198]!==Rn?(zn=(0,Q.jsx)($,{icon:i,title:`Trash`,description:`Manage deleted conversations`,testId:`settings-section-trash`,children:(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[Fn,Rn]})}),t[197]=Fn,t[198]=Rn,t[199]=zn):zn=t[199];let Bn;t[200]!==q||t[201]!==Et?(Bn=(0,Q.jsx)(`div`,{"data-testid":`delete-all-description`,className:`text-sm text-muted-foreground flex items-center h-9`,children:q?(0,Q.jsxs)(Q.Fragment,{children:[`Delete all `,Et,` `,`conversation`,Et===1?``:`s`]}):(0,Q.jsx)(_,{className:`h-4 w-48`})}),t[200]=q,t[201]=Et,t[202]=Bn):Bn=t[202];let Vn=!q||Et===0,Hn;t[203]===Symbol.for(`react.memo_cache_sentinel`)?(Hn=(0,Q.jsx)(ie,{className:`h-4 w-4`}),t[203]=Hn):Hn=t[203];let Un;t[204]!==K||t[205]!==Vn?(Un=(0,Q.jsxs)(j,{"data-testid":`delete-all-button`,variant:`destructive`,size:`sm`,onClick:K,disabled:Vn,className:`gap-2`,type:`button`,children:[Hn,`Delete All`]}),t[204]=K,t[205]=Vn,t[206]=Un):Un=t[206];let Wn;t[207]!==Bn||t[208]!==Un?(Wn=(0,Q.jsx)($,{icon:Ae,title:`Danger Zone`,description:`Irreversible actions`,variant:`danger`,testId:`settings-section-danger-zone`,children:(0,Q.jsxs)(`div`,{className:`flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between`,children:[Bn,Un]})}),t[207]=Bn,t[208]=Un,t[209]=Wn):Wn=t[209];let Gn;t[210]!==jt||t[211]!==Mt||t[212]!==Nt||t[213]!==Ht||t[214]!==Ut||t[215]!==Kt||t[216]!==Sn||t[217]!==Nn||t[218]!==zn||t[219]!==Wn?(Gn=(0,Q.jsxs)(`form`,{onSubmit:it,className:`space-y-4`,children:[jt,Mt,Nt,Ht,Ut,Kt,Sn,Nn,zn,Wn]}),t[210]=jt,t[211]=Mt,t[212]=Nt,t[213]=Ht,t[214]=Ut,t[215]=Kt,t[216]=Sn,t[217]=Nn,t[218]=zn,t[219]=Wn,t[220]=Gn):Gn=t[220];let Kn;t[221]===Symbol.for(`react.memo_cache_sentinel`)?(Kn=(0,Q.jsx)(`div`,{className:`h-4`}),t[221]=Kn):Kn=t[221];let qn;t[222]===Gn?qn=t[223]:(qn=(0,Q.jsx)(te,{className:`flex-1`,children:(0,Q.jsxs)(`div`,{className:`mx-auto w-full max-w-lg space-y-4 p-4 sm:p-6`,children:[Gn,Kn]})}),t[222]=Gn,t[223]=qn);let Jn;return t[224]!==At||t[225]!==qn?(Jn=(0,Q.jsxs)(`div`,{"data-testid":`settings-page`,className:`flex h-screen flex-col bg-background`,children:[At,qn]}),t[224]=At,t[225]=qn,t[226]=Jn):Jn=t[226],Jn};function nt(e){return e&&(e.id||e.name)}function rt(e){return e&&(e.name||e.model)}function it(e){return e.preventDefault()}function at(e){return(0,Q.jsx)(_,{className:`h-[42px] flex-1 min-w-[90px] rounded-lg`},e)}function ot(e){return(0,Q.jsx)(_,{className:`h-[42px] flex-1 min-w-[120px] rounded-lg`},e)}function st(e){return(0,Q.jsx)(_,{className:`h-[58px] flex-1 min-w-[90px] rounded-lg`},e)}function ct(e){return(0,Q.jsx)(S,{value:e.value,children:e.label},e.value)}function lt(e){return(0,Q.jsx)(S,{value:e.id,children:(0,Q.jsxs)(`div`,{className:`flex flex-col`,children:[(0,Q.jsx)(`span`,{children:e.name}),(0,Q.jsx)(`span`,{className:`text-[10px] text-muted-foreground line-clamp-1`,children:e.description})]})},e.id)}function ut(e){return(0,Q.jsx)(S,{value:e.value,children:e.label},e.value)}var dt=[],ft={value:2,unit:`days`},pt=()=>{let{goBack:r}=re(),[i,a]=(0,Z.useState)(!1),c=W(Te),ee=W(F),h=W(me),g=W(Se),_=W(Me),v=W(pe),y=W(Ee),b=W(oe),te=W(Y),x=W(he),ne=W(Pe),S=W(T),C=W(Fe),ie=W(De),ae=W(ce),w=W(n),D=W(m),j=W(f),B=W(t),U=W(A),ve=W(d),we=W(l),K=W(o),[Oe,Ae]=(0,Z.useState)(!1),[q,J]=(0,Z.useState)(null),[Ne,ze]=(0,Z.useState)(!1),[Be,Ve]=(0,Z.useState)(null),[He,Ue]=(0,Z.useState)(null),[X,We]=(0,Z.useState)(null),Ge=i?c:`system`,Ke=i?ee:`default`,qe=i?h:dt,Je=i?g:ft,Ye=i?_:`auto`,Xe=i?v:`auto`,Ze=i?y:ye,Qe=i?b:null,$e=i?te:null,$=i?x:null,et=i?ne:null,nt=i?S:`mistralai/devstral-2512:free`,rt=i?C:`gemini-2.0-flash-exp`,it=i?ie:`deepseek-r1:1.5b`,at=i?ae:`http://localhost:11434`;(0,Z.useEffect)(()=>{(async()=>{if(Qe)try{let e=await H(Qe),t=await _e(Qe),n=await Le(Qe);Ve(e),Ue(t),We(n),e&&s(),t&&u()}catch(e){console.error(`Failed to unlock keys:`,e),L(null),be(`Failed to unlock. Incorrect password?`)}else Ve(null),Ue(null),We(null)})()},[Qe]);let[ot,st]=(0,Z.useState)(null),ct=(0,Z.useCallback)(async()=>{await p()},[]),lt=(0,Z.useCallback)(async()=>{await p()},[]);(0,Z.useEffect)(()=>{(async()=>{try{st(O()),await s()}catch(e){console.error(`Failed to initialize settings page:`,e)}finally{a(!0)}})()},[]),(0,Z.useEffect)(()=>{i&&Ze===`ollama`&&lt()},[at,Ze,i,lt]);let{activeCount:ut,archivedCount:pt,deletedCount:mt}=(0,Z.useMemo)(()=>i?{activeCount:qe.filter(e=>e.status===`active`).length,archivedCount:qe.filter(e=>e.status===`archived`).length,deletedCount:qe.filter(e=>e.status===`deleted`).length}:{activeCount:0,archivedCount:0,deletedCount:0},[qe,i]),ht=(0,Z.useCallback)(e=>{z(e)},[]),gt=(0,Z.useCallback)(e=>{se(e)},[]),_t=(0,Z.useCallback)(e=>{fe(e)},[]),vt=(0,Z.useCallback)(e=>{I(e)},[]),yt=(0,Z.useCallback)(e=>{ue(e)},[]),bt=(0,Z.useCallback)(e=>{L(e)},[]),xt=(0,Z.useCallback)(()=>{G({title:`Reset Security Settings`,message:`Are you sure you want to reset your master password? All stored API keys will be deleted and you will need to re-enter them with a new password.`,confirmText:`Reset Everything`,variant:`destructive`,onConfirm:()=>{R(),ke(`Security settings reset successfully.`)}})},[]),St=(0,Z.useCallback)(async e=>{await de(e),Ve(e),e&&s()},[]),Ct=(0,Z.useCallback)(async e=>{await M(e),Ue(e),e&&u()},[]),wt=(0,Z.useCallback)(async e=>{await V(e),We(e)},[]);return(0,Q.jsx)(tt,{isHydrated:i,currentAppearance:Ge,currentTheme:Ke,temperatureUnit:Ye,timezone:Xe,systemTimezone:ot,providerType:Ze,encryptedOpenRouterApiKey:$e,unlockedOpenRouterApiKey:Be,encryptedGoogleApiKey:$,unlockedGoogleApiKey:He,encryptedOllamaApiKey:et,unlockedOllamaApiKey:X,openRouterModel:nt,openRouterModels:w,googleModel:rt,googleModels:j,isLoadingGoogleModels:B,isLocked:U,masterPassword:Qe,ollamaModel:it,ollamaBaseUrl:at,ollamaModels:ve,ollamaStatus:K,isLoadingOllamaModels:we,isPulling:Ne,pullProgress:q,isLoadingModels:D,activeCount:ut,archivedCount:pt,deletedCount:mt,archiveThreshold:Je,isImporting:Oe,onAppearanceChange:ht,onThemeChange:gt,onTemperatureUnitChange:_t,onTimezoneChange:vt,onProviderTypeChange:yt,onMasterPasswordChange:bt,onResetSecurity:xt,onOpenRouterApiKeyChange:St,onOpenRouterModelChange:(0,Z.useCallback)(e=>{N(e)},[]),onGoogleApiKeyChange:Ct,onOllamaApiKeyChange:wt,onGoogleModelChange:(0,Z.useCallback)(e=>{P(e)},[]),onOllamaModelChange:(0,Z.useCallback)(e=>{E(e)},[]),onOllamaBaseUrlChange:(0,Z.useCallback)(e=>{Re(e)},[]),onCheckOllama:ct,onPullModel:(0,Z.useCallback)(async()=>{if(!Ne){ze(!0),J(null);try{await e(at,it,e=>{J(e)}),ke(`Model pulled successfully!`),lt()}catch(e){console.error(`Failed to pull model:`,e),be(`Failed to pull model: ${e instanceof Error?e.message:String(e)}`)}finally{ze(!1),J(null)}}},[at,it,Ne,lt]),onArchiveThresholdChange:(0,Z.useCallback)(e=>{if(le(e),e.value>0){let e=k();e>0&&je(`${e} conversation${e===1?``:`s`} were archived based on the new threshold.`)}},[]),onExport:(0,Z.useCallback)(()=>{ge()},[]),onImport:(0,Z.useCallback)(async(e,t)=>{Ae(!0);try{let n=await Ie(e,t);n.success?ke(`Successfully imported ${n.imported} conversation${n.imported===1?``:`s`}.`):be(`Import failed: ${n.error}`)}finally{Ae(!1)}},[]),onClearAll:(0,Z.useCallback)(()=>{G({title:`Delete All Conversations`,message:`Are you sure you want to delete ALL conversations? This includes active, archived, and deleted chats. This cannot be undone.`,confirmText:`Delete Everything`,variant:`destructive`,onConfirm:()=>{xe(),ke(`All conversations deleted.`)}})},[]),onCleanupDeleted:(0,Z.useCallback)(async()=>{G({title:`Empty Trash`,message:`Permanently delete ${mt} conversation${mt===1?``:`s`} from trash? This cannot be undone.`,confirmText:`Empty Trash`,variant:`destructive`,onConfirm:async()=>{let e=await Ce();ke(`${e} conversation${e===1?``:`s`} permanently deleted.`)}})},[mt]),onBack:(0,Z.useCallback)(()=>{r()},[r])})};export{pt as component};